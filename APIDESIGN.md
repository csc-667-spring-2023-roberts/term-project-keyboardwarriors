| Action                                  | Inputs/Data                                                                                | Pre-Condition(s)                                                                                                                                                                                                                                                                                                         | Post-Condition(s)                                                                                                                                                                                                                                                                                                                                                                             | API Endpoint                                                                                       |
| --------------------------------------- | ------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| User creates a game                     | 1. player_id<br>2. game_title<br>3. player_count                                           | 1. User must be signed in.                                                                                                                                                                                                                                                                                               | 1. Create a game with game_id that doesn’t exist already.<br>2. Update global lobby to include this new game.<br>3. player_id added to this game_id.<br>4. Player is sent to the waiting room of this game_id.                                                                                                                                                                                | POST /games/create<br><br>{game_title, player_count}                                               |
| User registers for an account           | 1. full name<br>2. username<br>3. email<br>4. password                                     | 1. Username is available.<br>2. Email is not used already.<br>3. Password meets requirements.                                                                                                                                                                                                                            | 1. A new user is added to the database.<br>2. User is logged in and redirected to the lobby page.                                                                                                                                                                                                                                                                                             | POST<br>/users/register<br><br>{full name, username,<br>email,<br>password}                        |
| User logs into an existing account      | 1. username<br>2. email<br>3. password                                                     | 1. The username/ email and password combination already exists in the database.                                                                                                                                                                                                                                          | 1. User is logged in and redirected to the lobby page.                                                                                                                                                                                                                                                                                                                                        | POST <br>/users/login/<br><br>{username,<br>email,<br>password}                                    |
| User places a word on the board         | 1. player_id<br>2. game_id<br>3. tile_id(s) that were placed and their x and y coordinates | 1. player_id is in game with game_id.<br>2. It is currently player_id's turn.<br>3. The player_id must have the tiles with tile_ids.<br>4. The tiles of the word placed must touch at least 1 existing tile on the board, the word must be a valid English word, and it must be in the horizontal or vertical direction. | 1. The player will have 7 tiles again by the end of their turn; as many as possible if not enough tiles in the bag.<br>2. Score of the word (including tile point values, word multipliers, and bonuses) is added to the user’s score.<br>3. The next player becomes the current player.<br>4. The tiles submitted by the player are emitted to the room.<br>5. The pass count is reset to 0. | POST /api/games/:id/submit-word<br><br>{tile_id(s)}<br><br>(player_id is available in the session) |
| Player exchanges tile(s)                | 1. game_id<br>2. player_id<br>3. tile_id(s)                                                | 1. player_id is in a game with game_id.<br>2. It is currently player_id's turn in game with game_id.<br>3. player_id has the tiles that they are attempting to exchange.<br>4. There are at least 7 tiles in the bag of game with game_id.                                                                               | 1. The player gets new tiles from the exchange.<br>2. The next player becomes the current player.<br>3. Pass count is reset to 0.                                                                                                                                                                                                                                                             | POST /api/games/:id/swap<br><br>{tile_id(s)}<br><br>(player_id is available in the session)        |
| Player retrieves the current game board | 1. player_id <br>2. game_id                                                                | 1. player_id is in a game with game_id.                                                                                                                                                                                                                                                                                  | 1. The current game board is returned, including all tiles placed on the board and multiplier squares.                                                                                                                                                                                                                                                                                        | GET /api/games/:id<br><br>(player_id is available in the session)                                  |
| Player resigns from the game            | 1. player_id<br>2. game_id                                                                 | 1. player_id is in a game with game_id.<br>2. It is currently player_id's turn in game with game_id.                                                                                                                                                                                                                     | 1. If there is only 1 non-resigned player in the game, end the game. Otherwise, give the turn to the next non-resigned player.<br>2. Set the player’s score to -1.<br>3. Reset pass count to 0.<br>4. Give the resigned player’s tiles back to the bag.                                                                                                                                       | POST /api/games/:id/resign<br><br>(player_id is available in the session)                          |
| Player passes their turn                | 1. player_id<br>2. game_id                                                                 | 1. player_id is in a game with game_id.<br>2. It is currently player_id's turn.                                                                                                                                                                                                                                          | 1. If all players have skipped two consecutive turns in a row, then the game will be over.<br>2. Else, increment the pass counter and give the turn to the next player.                                                                                                                                                                                                                       | POST api/games/:id/pass-turn<br><br>{player_id, game_id}                                           |
